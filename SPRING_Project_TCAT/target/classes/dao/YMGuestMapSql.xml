<?xml version="1.0" encoding="UTF-8"?>
   <!DOCTYPE mapper
             PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
             "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
             
   <mapper namespace="spring.project.tcat.persistence.YMGuestDAO">
   <!-- 등급관리 -->
   <select id="mRating" resultType="int">
		select count(*) as buy
		from
		Ticketing
		where member_id=#{strId}
	</select>
	
	<update id="mRatingUpdate" parameterType="java.util.Map">
	update member
	<if test="compare ==1">
    	set Rating='C'			
    </if>
    <if test="compare ==2">
    	set Rating='B'			
    </if>
    <if test="compare ==3">
    	set Rating='A'			
    </if>
    <if test="compare ==4">
    	set Rating='VIP'			
    </if> 
	 	where member_id=#{strId}
	
	</update>
	
   </mapper>