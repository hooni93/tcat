<?xml version="1.0" encoding="UTF-8"?>
   <!DOCTYPE mapper
             PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
             "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="spring.project.tcat.persistence.JMHGuestDAO">
	<!-- 이름,이메일 매칭 -->
	<select id="id_emailChk" resultType="int">
		SELECT 	COUNT(*)
		FROM	member
		WHERE
				<if test="member_id==null">
				member_name LIKE '${member_name}'
				</if>
				<if test="member_id!=null">
				member_id LIKE '${member_id}'
				</if>	
		AND		member_email LIKE '${member_email}'
	</select>
	<!--로그인 확인  -->
	<select id="loginPro" resultType="int">
		SELECT 	COUNT(*)
		FROM	member
		WHERE	member_id = #{member_id}
		AND		member_pwd = #{member_pwd}
		AND		NOT( member_step = 3)
	</select>
	<!-- 접속일 변경 -->
	<update id="updateLastDate">
		UPDATE	member
		SET		lastDate = SYSDATE, member_step = 1	<!--접속일갱신, 휴면계정 풀어주기  -->
		WHERE 	member_id = #{member_id}
	</update>
	<!--아이디 찾기  -->
	<select id="findIdPwd" resultType="String">
		SELECT 	
			<if test="member_id==null">
				member_id
			</if>
			<if test="member_id!=null">
				member_pwd
			</if>
		FROM	member
		WHERE	
			<if test="member_id==null">
				member_name = #{member_name}
				AND member_email = #{member_email}
			</if>
			<if test="member_id!=null">
				member_id = #{member_id}
			</if>
	</select>
	
	<!--회원 정보 가져오기  -->
	<select id="myPageInfo" resultType="spring.project.tcat.VO.MemberVO">
	
	</select>
	<!--해당 회원 스토어 구매 정보  -->
	<select id="memDiscBuy" resultType="spring.project.tcat.VO.TcatDiscBuyVO"></select>
</mapper>